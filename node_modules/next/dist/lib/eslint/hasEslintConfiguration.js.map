{"version":3,"sources":["../../../lib/eslint/hasEslintConfiguration.ts"],"sourcesContent":["import { promises as fs } from 'fs'\n\nexport type ConfigAvailable = {\n  exists: boolean\n  emptyEslintrc?: boolean\n  emptyPkgJsonConfig?: boolean\n  firstTimeSetup?: true\n}\n\nexport async function hasEslintConfiguration(\n  eslintrcFile: string | null,\n  packageJsonConfig: { eslintConfig: any } | null\n): Promise<ConfigAvailable> {\n  const configObject = {\n    exists: false,\n    emptyEslintrc: false,\n    emptyPkgJsonConfig: false,\n  }\n\n  if (eslintrcFile) {\n    const content = await fs.readFile(eslintrcFile, { encoding: 'utf8' }).then(\n      (txt) => txt.trim().replace(/\\n/g, ''),\n      () => null\n    )\n\n    if (\n      content === '' ||\n      content === '{}' ||\n      content === '---' ||\n      content === 'module.exports = {}'\n    ) {\n      return { ...configObject, emptyEslintrc: true }\n    }\n  } else if (packageJsonConfig?.eslintConfig) {\n    if (Object.entries(packageJsonConfig?.eslintConfig).length === 0) {\n      return {\n        ...configObject,\n        emptyPkgJsonConfig: true,\n      }\n    }\n  } else {\n    return configObject\n  }\n\n  return { ...configObject, exists: true }\n}\n"],"names":[],"mappings":";;;;QASsB,sBAAsB,GAAtB,sBAAsB;AATb,GAAI,CAAJ,GAAI;eASb,sBAAsB,CAC1C,YAA2B,EAC3B,iBAA+C,EACrB,CAAC;IAC3B,KAAK,CAAC,YAAY;QAChB,MAAM,EAAE,KAAK;QACb,aAAa,EAAE,KAAK;QACpB,kBAAkB,EAAE,KAAK;;IAG3B,EAAE,EAAE,YAAY,EAAE,CAAC;QACjB,KAAK,CAAC,OAAO,SApBc,GAAI,UAoBN,QAAQ,CAAC,YAAY;YAAI,QAAQ,GAAE,IAAM;WAAI,IAAI,EACvE,GAAG,GAAK,GAAG,CAAC,IAAI,GAAG,OAAO;cACrB,IAAI;;QAGZ,EAAE,EACA,OAAO,WACP,OAAO,MAAK,EAAI,KAChB,OAAO,MAAK,GAAK,KACjB,OAAO,MAAK,mBAAqB,GACjC,CAAC;;mBACW,YAAY;gBAAE,aAAa,EAAE,IAAI;;QAC/C,CAAC;IACH,CAAC,MAAM,EAAE,EAAE,iBAAiB,aAAjB,iBAAiB,UAAjB,CAA+B,QAA/B,CAA+B,GAA/B,iBAAiB,CAAE,YAAY,EAAE,CAAC;QAC3C,EAAE,EAAE,MAAM,CAAC,OAAO,CAAC,iBAAiB,aAAjB,iBAAiB,UAAjB,CAA+B,QAA/B,CAA+B,GAA/B,iBAAiB,CAAE,YAAY,EAAE,MAAM,KAAK,CAAC,EAAE,CAAC;;mBAE5D,YAAY;gBACf,kBAAkB,EAAE,IAAI;;QAE5B,CAAC;IACH,CAAC,MAAM,CAAC;eACC,YAAY;IACrB,CAAC;;WAEW,YAAY;QAAE,MAAM,EAAE,IAAI;;AACxC,CAAC"}