{"version":3,"sources":["../../../client/dev/amp-dev.js"],"sourcesContent":["/* globals __webpack_hash__ */\nimport EventSourcePolyfill from './event-source-polyfill'\nimport { addMessageListener } from './error-overlay/eventsource'\nimport { setupPing } from './on-demand-entries-utils'\nimport { displayContent } from './fouc'\n\nif (!window.EventSource) {\n  window.EventSource = EventSourcePolyfill\n}\n\nconst data = JSON.parse(document.getElementById('__NEXT_DATA__').textContent)\nlet { assetPrefix, page } = data\nassetPrefix = assetPrefix || ''\nlet mostRecentHash = null\n/* eslint-disable-next-line */\nlet curHash = __webpack_hash__\nconst hotUpdatePath =\n  assetPrefix + (assetPrefix.endsWith('/') ? '' : '/') + '_next/static/webpack/'\n\n// Is there a newer version of this code available?\nfunction isUpdateAvailable() {\n  // __webpack_hash__ is the hash of the current compilation.\n  // It's a global variable injected by Webpack.\n  /* eslint-disable-next-line */\n  return mostRecentHash !== __webpack_hash__\n}\n\n// Webpack disallows updates in other states.\nfunction canApplyUpdates() {\n  return module.hot.status() === 'idle'\n}\n\n// This function reads code updates on the fly and hard\n// reloads the page when it has changed.\nasync function tryApplyUpdates() {\n  if (!isUpdateAvailable() || !canApplyUpdates()) {\n    return\n  }\n  try {\n    const res = await fetch(\n      typeof __webpack_runtime_id__ !== 'undefined'\n        ? // eslint-disable-next-line no-undef\n          `${hotUpdatePath}${curHash}.${__webpack_runtime_id__}.hot-update.json`\n        : `${hotUpdatePath}${curHash}.hot-update.json`\n    )\n    const jsonData = await res.json()\n    const curPage = page === '/' ? 'index' : page\n    // webpack 5 uses an array instead\n    const pageUpdated = (\n      Array.isArray(jsonData.c) ? jsonData.c : Object.keys(jsonData.c)\n    ).some((mod) => {\n      return (\n        mod.indexOf(\n          `pages${curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`}`\n        ) !== -1 ||\n        mod.indexOf(\n          `pages${\n            curPage.substr(0, 1) === '/' ? curPage : `/${curPage}`\n          }`.replace(/\\//g, '\\\\')\n        ) !== -1\n      )\n    })\n\n    if (pageUpdated) {\n      document.location.reload(true)\n    } else {\n      curHash = mostRecentHash\n    }\n  } catch (err) {\n    console.error('Error occurred checking for update', err)\n    document.location.reload(true)\n  }\n}\n\naddMessageListener((event) => {\n  if (event.data === '\\uD83D\\uDC93') {\n    return\n  }\n\n  try {\n    const message = JSON.parse(event.data)\n\n    if (message.action === 'sync' || message.action === 'built') {\n      if (!message.hash) {\n        return\n      }\n      mostRecentHash = message.hash\n      tryApplyUpdates()\n    } else if (message.action === 'reloadPage') {\n      document.location.reload(true)\n    }\n  } catch (ex) {\n    console.warn('Invalid HMR message: ' + event.data + '\\n' + ex)\n  }\n})\n\nsetupPing(assetPrefix, () => page)\ndisplayContent()\n"],"names":[],"mappings":"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"}