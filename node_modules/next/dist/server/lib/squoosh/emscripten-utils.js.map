{"version":3,"sources":["../../../../server/lib/squoosh/emscripten-utils.ts"],"sourcesContent":["import { fileURLToPath } from 'url'\n\nexport function pathify(path: string) {\n  if (path.startsWith('file://')) {\n    path = fileURLToPath(path)\n  }\n  return path\n}\n\nexport function instantiateEmscriptenWasm(\n  factory: (args: { locateFile: () => string }) => {\n    decode?: (\n      buffer: Buffer | Uint8Array,\n      width: number,\n      height: number,\n      opts: any\n    ) => Buffer\n    encode?: (\n      buffer: Buffer | Uint8Array,\n      width: number,\n      height: number,\n      opts: any\n    ) => Buffer\n  },\n  path: string\n) {\n  return factory({\n    locateFile() {\n      return pathify(path)\n    },\n  })\n}\n"],"names":[],"mappings":";;;;QAEgB,OAAO,GAAP,OAAO;QAOP,yBAAyB,GAAzB,yBAAyB;AATX,GAAK,CAAL,IAAK;SAEnB,OAAO,CAAC,IAAY,EAAE,CAAC;IACrC,EAAE,EAAE,IAAI,CAAC,UAAU,EAAC,OAAS,IAAG,CAAC;QAC/B,IAAI,OAJsB,IAAK,gBAIV,IAAI;IAC3B,CAAC;WACM,IAAI;AACb,CAAC;SAEe,yBAAyB,CACvC,OAaC,EACD,IAAY,EACZ,CAAC;WACM,OAAO;QACZ,UAAU,IAAG,CAAC;mBACL,OAAO,CAAC,IAAI;QACrB,CAAC;;AAEL,CAAC"}