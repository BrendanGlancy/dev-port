{"version":3,"sources":["../../server/config-shared.ts"],"sourcesContent":["import os from 'os'\nimport { Header, Redirect, Rewrite } from '../lib/load-custom-routes'\nimport { ImageConfig, imageConfigDefault } from './image-config'\n\ntype NoOptionals<T> = {\n  [P in keyof T]-?: T[P]\n}\n\nexport type NextConfigComplete = NoOptionals<NextConfig>\n\nexport interface I18NConfig {\n  defaultLocale: string\n  domains?: DomainLocale[]\n  localeDetection?: false\n  locales: string[]\n}\n\nexport interface DomainLocale {\n  defaultLocale: string\n  domain: string\n  http?: true\n  locales?: string[]\n}\n\nexport interface ESLintConfig {\n  /** Only run ESLint on these directories with `next lint` and `next build`. */\n  dirs?: string[]\n  /** Do not run ESLint during production builds (`next build`). */\n  ignoreDuringBuilds?: boolean\n}\n\nexport interface TypeScriptConfig {\n  /** Do not run TypeScript during production builds (`next build`). */\n  ignoreBuildErrors?: boolean\n}\n\nexport type NextConfig = { [key: string]: any } & {\n  i18n?: I18NConfig | null\n\n  eslint?: ESLintConfig\n  typescript?: TypeScriptConfig\n\n  headers?: () => Promise<Header[]>\n  rewrites?: () => Promise<\n    | Rewrite[]\n    | {\n        beforeFiles: Rewrite[]\n        afterFiles: Rewrite[]\n        fallback: Rewrite[]\n      }\n  >\n  redirects?: () => Promise<Redirect[]>\n\n  webpack5?: false\n  excludeDefaultMomentLocales?: boolean\n\n  webpack?:\n    | ((\n        config: any,\n        context: {\n          dir: string\n          dev: boolean\n          isServer: boolean\n          buildId: string\n          config: NextConfigComplete\n          defaultLoaders: { babel: any }\n          totalPages: number\n          webpack: any\n        }\n      ) => any)\n    | null\n\n  trailingSlash?: boolean\n  env?: { [key: string]: string }\n  distDir?: string\n  cleanDistDir?: boolean\n  assetPrefix?: string\n  useFileSystemPublicRoutes?: boolean\n  generateBuildId?: () => string | null | Promise<string | null>\n  generateEtags?: boolean\n  pageExtensions?: string[]\n  compress?: boolean\n  poweredByHeader?: boolean\n  images?: ImageConfig\n  devIndicators?: {\n    buildActivity?: boolean\n  }\n  onDemandEntries?: {\n    maxInactiveAge?: number\n    pagesBufferLength?: number\n  }\n  amp?: {\n    canonicalBase?: string\n  }\n  basePath?: string\n  sassOptions?: { [key: string]: any }\n  productionBrowserSourceMaps?: boolean\n  optimizeFonts?: boolean\n  reactStrictMode?: boolean\n  publicRuntimeConfig?: { [key: string]: any }\n  serverRuntimeConfig?: { [key: string]: any }\n  httpAgentOptions?: { keepAlive?: boolean }\n  future?: {\n    /**\n     * @deprecated this options was moved to the top level\n     */\n    webpack5?: false\n    strictPostcssConfiguration?: boolean\n  }\n  experimental?: {\n    swcMinify?: boolean\n    swcLoader?: boolean\n    cpus?: number\n    sharedPool?: boolean\n    plugins?: boolean\n    profiling?: boolean\n    isrFlushToDisk?: boolean\n    reactMode?: 'legacy' | 'concurrent' | 'blocking'\n    workerThreads?: boolean\n    pageEnv?: boolean\n    optimizeImages?: boolean\n    optimizeCss?: boolean\n    scrollRestoration?: boolean\n    stats?: boolean\n    externalDir?: boolean\n    conformance?: boolean\n    amp?: {\n      optimizer?: any\n      validator?: string\n      skipValidation?: boolean\n    }\n    reactRoot?: boolean\n    disableOptimizedLoading?: boolean\n    gzipSize?: boolean\n    craCompat?: boolean\n    esmExternals?: boolean | 'loose'\n    staticPageGenerationTimeout?: number\n    isrMemoryCacheSize?: number\n    nftTracing?: boolean\n    concurrentFeatures?: boolean\n  }\n}\n\nexport const defaultConfig: NextConfig = {\n  env: {},\n  webpack: null,\n  webpackDevMiddleware: null,\n  eslint: {\n    ignoreDuringBuilds: false,\n  },\n  typescript: {\n    ignoreBuildErrors: false,\n  },\n  distDir: '.next',\n  cleanDistDir: true,\n  assetPrefix: '',\n  configOrigin: 'default',\n  useFileSystemPublicRoutes: true,\n  generateBuildId: () => null,\n  generateEtags: true,\n  pageExtensions: ['tsx', 'ts', 'jsx', 'js'],\n  target: 'server',\n  poweredByHeader: true,\n  compress: true,\n  analyticsId: process.env.VERCEL_ANALYTICS_ID || '',\n  images: imageConfigDefault,\n  devIndicators: {\n    buildActivity: true,\n  },\n  onDemandEntries: {\n    maxInactiveAge: 60 * 1000,\n    pagesBufferLength: 2,\n  },\n  amp: {\n    canonicalBase: '',\n  },\n  basePath: '',\n  sassOptions: {},\n  trailingSlash: false,\n  i18n: null,\n  productionBrowserSourceMaps: false,\n  optimizeFonts: true,\n  webpack5:\n    Number(process.env.NEXT_PRIVATE_TEST_WEBPACK4_MODE) > 0 ? false : undefined,\n  excludeDefaultMomentLocales: true,\n  serverRuntimeConfig: {},\n  publicRuntimeConfig: {},\n  reactStrictMode: false,\n  httpAgentOptions: {\n    keepAlive: true,\n  },\n  experimental: {\n    swcLoader: false,\n    swcMinify: false,\n    cpus: Math.max(\n      1,\n      (Number(process.env.CIRCLE_NODE_TOTAL) ||\n        (os.cpus() || { length: 1 }).length) - 1\n    ),\n    sharedPool: false,\n    plugins: false,\n    profiling: false,\n    isrFlushToDisk: true,\n    workerThreads: false,\n    pageEnv: false,\n    optimizeImages: false,\n    optimizeCss: false,\n    scrollRestoration: false,\n    stats: false,\n    externalDir: false,\n    reactRoot: Number(process.env.NEXT_PRIVATE_REACT_ROOT) > 0,\n    disableOptimizedLoading: false,\n    gzipSize: true,\n    craCompat: false,\n    esmExternals: false,\n    staticPageGenerationTimeout: 60,\n    // default to 50MB limit\n    isrMemoryCacheSize: 50 * 1024 * 1024,\n    nftTracing: false,\n    concurrentFeatures: false,\n  },\n  future: {\n    strictPostcssConfiguration: false,\n  },\n}\n\nexport function normalizeConfig(phase: string, config: any) {\n  if (typeof config === 'function') {\n    config = config(phase, { defaultConfig })\n\n    if (typeof config.then === 'function') {\n      throw new Error(\n        '> Promise returned in next config. https://nextjs.org/docs/messages/promise-in-next-config'\n      )\n    }\n  }\n  return config\n}\n"],"names":[],"mappings":";;;;QAkOgB,eAAe,GAAf,eAAe;;AAlOhB,GAAI,CAAJ,GAAI;AAE6B,GAAgB,CAAhB,YAAgB;;;;;;AA6IzD,KAAK,CAAC,aAAa;IACxB,GAAG;;IACH,OAAO,EAAE,IAAI;IACb,oBAAoB,EAAE,IAAI;IAC1B,MAAM;QACJ,kBAAkB,EAAE,KAAK;;IAE3B,UAAU;QACR,iBAAiB,EAAE,KAAK;;IAE1B,OAAO,GAAE,KAAO;IAChB,YAAY,EAAE,IAAI;IAClB,WAAW;IACX,YAAY,GAAE,OAAS;IACvB,yBAAyB,EAAE,IAAI;IAC/B,eAAe,MAAQ,IAAI;;IAC3B,aAAa,EAAE,IAAI;IACnB,cAAc;SAAG,GAAK;SAAE,EAAI;SAAE,GAAK;SAAE,EAAI;;IACzC,MAAM,GAAE,MAAQ;IAChB,eAAe,EAAE,IAAI;IACrB,QAAQ,EAAE,IAAI;IACd,WAAW,EAAE,OAAO,CAAC,GAAG,CAAC,mBAAmB;IAC5C,MAAM,EAnKwC,YAAgB;IAoK9D,aAAa;QACX,aAAa,EAAE,IAAI;;IAErB,eAAe;QACb,cAAc,EAAE,EAAE,GAAG,IAAI;QACzB,iBAAiB,EAAE,CAAC;;IAEtB,GAAG;QACD,aAAa;;IAEf,QAAQ;IACR,WAAW;;IACX,aAAa,EAAE,KAAK;IACpB,IAAI,EAAE,IAAI;IACV,2BAA2B,EAAE,KAAK;IAClC,aAAa,EAAE,IAAI;IACnB,QAAQ,EACN,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,+BAA+B,IAAI,CAAC,GAAG,KAAK,GAAG,SAAS;IAC7E,2BAA2B,EAAE,IAAI;IACjC,mBAAmB;;IACnB,mBAAmB;;IACnB,eAAe,EAAE,KAAK;IACtB,gBAAgB;QACd,SAAS,EAAE,IAAI;;IAEjB,YAAY;QACV,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE,KAAK;QAChB,IAAI,EAAE,IAAI,CAAC,GAAG,CACZ,CAAC,GACA,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,MApM5B,GAAI,SAqMP,IAAI;YAAQ,MAAM,EAAE,CAAC;WAAI,MAAM,IAAI,CAAC;QAE5C,UAAU,EAAE,KAAK;QACjB,OAAO,EAAE,KAAK;QACd,SAAS,EAAE,KAAK;QAChB,cAAc,EAAE,IAAI;QACpB,aAAa,EAAE,KAAK;QACpB,OAAO,EAAE,KAAK;QACd,cAAc,EAAE,KAAK;QACrB,WAAW,EAAE,KAAK;QAClB,iBAAiB,EAAE,KAAK;QACxB,KAAK,EAAE,KAAK;QACZ,WAAW,EAAE,KAAK;QAClB,SAAS,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,uBAAuB,IAAI,CAAC;QAC1D,uBAAuB,EAAE,KAAK;QAC9B,QAAQ,EAAE,IAAI;QACd,SAAS,EAAE,KAAK;QAChB,YAAY,EAAE,KAAK;QACnB,2BAA2B,EAAE,EAAE;QAC/B,EAAwB,AAAxB,sBAAwB;QACxB,kBAAkB,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI;QACpC,UAAU,EAAE,KAAK;QACjB,kBAAkB,EAAE,KAAK;;IAE3B,MAAM;QACJ,0BAA0B,EAAE,KAAK;;;QA/ExB,aAAa,GAAb,aAAa;SAmFV,eAAe,CAAC,KAAa,EAAE,MAAW,EAAE,CAAC;IAC3D,EAAE,SAAS,MAAM,MAAK,QAAU,GAAE,CAAC;QACjC,MAAM,GAAG,MAAM,CAAC,KAAK;YAAI,aAAa;;QAEtC,EAAE,SAAS,MAAM,CAAC,IAAI,MAAK,QAAU,GAAE,CAAC;YACtC,KAAK,CAAC,GAAG,CAAC,KAAK,EACb,0FAA4F;QAEhG,CAAC;IACH,CAAC;WACM,MAAM;AACf,CAAC"}