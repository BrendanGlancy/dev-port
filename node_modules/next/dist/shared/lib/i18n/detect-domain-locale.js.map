{"version":3,"sources":["../../../../shared/lib/i18n/detect-domain-locale.ts"],"sourcesContent":["import type { DomainLocale } from '../../../server/config-shared'\n\nexport function detectDomainLocale(\n  domainItems?: DomainLocale[],\n  hostname?: string,\n  detectedLocale?: string\n) {\n  let domainItem: DomainLocale | undefined\n\n  if (domainItems) {\n    if (detectedLocale) {\n      detectedLocale = detectedLocale.toLowerCase()\n    }\n\n    for (const item of domainItems) {\n      // remove port if present\n      const domainHostname = item.domain?.split(':')[0].toLowerCase()\n      if (\n        hostname === domainHostname ||\n        detectedLocale === item.defaultLocale.toLowerCase() ||\n        item.locales?.some((locale) => locale.toLowerCase() === detectedLocale)\n      ) {\n        domainItem = item\n        break\n      }\n    }\n  }\n\n  return domainItem\n}\n"],"names":[],"mappings":";;;;QAEgB,kBAAkB,GAAlB,kBAAkB;SAAlB,kBAAkB,CAChC,WAA4B,EAC5B,QAAiB,EACjB,cAAuB,EACvB,CAAC;IACD,GAAG,CAAC,UAAU;IAEd,EAAE,EAAE,WAAW,EAAE,CAAC;QAChB,EAAE,EAAE,cAAc,EAAE,CAAC;YACnB,cAAc,GAAG,cAAc,CAAC,WAAW;QAC7C,CAAC;aAEI,KAAK,CAAC,IAAI,IAAI,WAAW,CAAE,CAAC;gBAER,GAAW,EAIhC,IAAY;YALd,EAAyB,AAAzB,uBAAyB;YACzB,KAAK,CAAC,cAAc,IAAG,GAAW,GAAX,IAAI,CAAC,MAAM,cAAX,GAAW,UAAX,CAAkB,QAAlB,CAAkB,GAAlB,GAAW,CAAE,KAAK,EAAC,CAAG,GAAE,CAAC,EAAE,WAAW;YAC7D,EAAE,EACA,QAAQ,KAAK,cAAc,IAC3B,cAAc,KAAK,IAAI,CAAC,aAAa,CAAC,WAAW,QACjD,IAAY,GAAZ,IAAI,CAAC,OAAO,cAAZ,IAAY,UAAZ,CAAkB,QAAlB,CAAkB,GAAlB,IAAY,CAAE,IAAI,EAAE,MAAM,GAAK,MAAM,CAAC,WAAW,OAAO,cAAc;gBACtE,CAAC;gBACD,UAAU,GAAG,IAAI;;YAEnB,CAAC;QACH,CAAC;IACH,CAAC;WAEM,UAAU;AACnB,CAAC"}