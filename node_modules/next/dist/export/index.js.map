{"version":3,"sources":["../../export/index.ts"],"sourcesContent":["import chalk from 'chalk'\nimport findUp from 'next/dist/compiled/find-up'\nimport {\n  promises,\n  existsSync,\n  exists as existsOrig,\n  readFileSync,\n  writeFileSync,\n} from 'fs'\nimport { Worker } from '../lib/worker'\nimport { dirname, join, resolve, sep } from 'path'\nimport { promisify } from 'util'\nimport { AmpPageStatus, formatAmpMessages } from '../build/output/index'\nimport * as Log from '../build/output/log'\nimport createSpinner from '../build/spinner'\nimport { API_ROUTE, SSG_FALLBACK_EXPORT_ERROR } from '../lib/constants'\nimport { recursiveCopy } from '../lib/recursive-copy'\nimport { recursiveDelete } from '../lib/recursive-delete'\nimport {\n  BUILD_ID_FILE,\n  CLIENT_PUBLIC_FILES_PATH,\n  CLIENT_STATIC_FILES_PATH,\n  CONFIG_FILE,\n  EXPORT_DETAIL,\n  EXPORT_MARKER,\n  PAGES_MANIFEST,\n  PHASE_EXPORT,\n  PRERENDER_MANIFEST,\n  SERVERLESS_DIRECTORY,\n  SERVER_DIRECTORY,\n} from '../shared/lib/constants'\nimport loadConfig, { isTargetLikeServerless } from '../server/config'\nimport { NextConfigComplete } from '../server/config-shared'\nimport { eventCliSession } from '../telemetry/events'\nimport { hasNextSupport } from '../telemetry/ci-info'\nimport { Telemetry } from '../telemetry/storage'\nimport {\n  normalizePagePath,\n  denormalizePagePath,\n} from '../server/normalize-page-path'\nimport { loadEnvConfig } from '@next/env'\nimport { PrerenderManifest } from '../build'\nimport { PagesManifest } from '../build/webpack/plugins/pages-manifest-plugin'\nimport { getPagePath } from '../server/require'\nimport { trace } from '../telemetry/trace'\n\nconst exists = promisify(existsOrig)\n\nfunction divideSegments(number: number, segments: number): number[] {\n  const result = []\n  while (number > 0 && segments > 0) {\n    const dividedNumber =\n      number < segments ? number : Math.floor(number / segments)\n\n    number -= dividedNumber\n    segments--\n    result.push(dividedNumber)\n  }\n  return result\n}\n\nconst createProgress = (total: number, label: string) => {\n  const segments = divideSegments(total, 4)\n\n  if (total === 0) {\n    throw new Error('invariant: progress total can not be zero')\n  }\n  let currentSegmentTotal = segments.shift()\n  let currentSegmentCount = 0\n  let lastProgressOutput = Date.now()\n  let curProgress = 0\n  let progressSpinner = createSpinner(`${label} (${curProgress}/${total})`, {\n    spinner: {\n      frames: [\n        '[    ]',\n        '[=   ]',\n        '[==  ]',\n        '[=== ]',\n        '[ ===]',\n        '[  ==]',\n        '[   =]',\n        '[    ]',\n        '[   =]',\n        '[  ==]',\n        '[ ===]',\n        '[====]',\n        '[=== ]',\n        '[==  ]',\n        '[=   ]',\n      ],\n      interval: 500,\n    },\n  })\n\n  return () => {\n    curProgress++\n\n    // Make sure we only log once\n    // - per fully generated segment, or\n    // - per minute\n    // when not showing the spinner\n    if (!progressSpinner) {\n      currentSegmentCount++\n\n      if (currentSegmentCount === currentSegmentTotal) {\n        currentSegmentTotal = segments.shift()\n        currentSegmentCount = 0\n      } else if (lastProgressOutput + 60000 > Date.now()) {\n        return\n      }\n\n      lastProgressOutput = Date.now()\n    }\n\n    const newText = `${label} (${curProgress}/${total})`\n    if (progressSpinner) {\n      progressSpinner.text = newText\n    } else {\n      console.log(newText)\n    }\n\n    if (curProgress === total && progressSpinner) {\n      progressSpinner.stop()\n      console.log(newText)\n    }\n  }\n}\n\ntype ExportPathMap = {\n  [page: string]: { page: string; query?: { [key: string]: string } }\n}\n\ninterface ExportOptions {\n  outdir: string\n  silent?: boolean\n  threads?: number\n  pages?: string[]\n  buildExport?: boolean\n  statusMessage?: string\n  exportPageWorker?: typeof import('./worker').default\n  endWorker?: () => Promise<void>\n}\n\nexport default async function exportApp(\n  dir: string,\n  options: ExportOptions,\n  configuration?: NextConfigComplete\n): Promise<void> {\n  const nextExportSpan = trace('next-export')\n\n  return nextExportSpan.traceAsyncFn(async () => {\n    dir = resolve(dir)\n\n    // attempt to load global env values so they are available in next.config.js\n    nextExportSpan\n      .traceChild('load-dotenv')\n      .traceFn(() => loadEnvConfig(dir, false, Log))\n\n    const nextConfig =\n      configuration ||\n      (await nextExportSpan\n        .traceChild('load-next-config')\n        .traceAsyncFn(() => loadConfig(PHASE_EXPORT, dir)))\n    const threads = options.threads || nextConfig.experimental.cpus\n    const distDir = join(dir, nextConfig.distDir)\n\n    const telemetry = options.buildExport ? null : new Telemetry({ distDir })\n\n    if (telemetry) {\n      telemetry.record(\n        eventCliSession(PHASE_EXPORT, distDir, {\n          webpackVersion: null,\n          cliCommand: 'export',\n          isSrcDir: null,\n          hasNowJson: !!(await findUp('now.json', { cwd: dir })),\n          isCustomServer: null,\n        })\n      )\n    }\n\n    const subFolders = nextConfig.trailingSlash && !options.buildExport\n    const isLikeServerless = nextConfig.target !== 'server'\n\n    if (!options.silent && !options.buildExport) {\n      Log.info(`using build directory: ${distDir}`)\n    }\n\n    const buildIdFile = join(distDir, BUILD_ID_FILE)\n\n    if (!existsSync(buildIdFile)) {\n      throw new Error(\n        `Could not find a production build in the '${distDir}' directory. Try building your app with 'next build' before starting the static export. https://nextjs.org/docs/messages/next-export-no-build-id`\n      )\n    }\n\n    const customRoutesDetected = ['rewrites', 'redirects', 'headers'].filter(\n      (config) => typeof nextConfig[config] === 'function'\n    )\n\n    if (\n      !hasNextSupport &&\n      !options.buildExport &&\n      customRoutesDetected.length > 0\n    ) {\n      Log.warn(\n        `rewrites, redirects, and headers are not applied when exporting your application, detected (${customRoutesDetected.join(\n          ', '\n        )}). See more info here: https://nextjs.org/docs/messages/export-no-custom-routes`\n      )\n    }\n\n    const buildId = readFileSync(buildIdFile, 'utf8')\n    const pagesManifest =\n      !options.pages &&\n      (require(join(\n        distDir,\n        isLikeServerless ? SERVERLESS_DIRECTORY : SERVER_DIRECTORY,\n        PAGES_MANIFEST\n      )) as PagesManifest)\n\n    let prerenderManifest: PrerenderManifest | undefined = undefined\n    try {\n      prerenderManifest = require(join(distDir, PRERENDER_MANIFEST))\n    } catch (_) {}\n\n    const excludedPrerenderRoutes = new Set<string>()\n    const pages = options.pages || Object.keys(pagesManifest)\n    const defaultPathMap: ExportPathMap = {}\n    let hasApiRoutes = false\n\n    for (const page of pages) {\n      // _document and _app are not real pages\n      // _error is exported as 404.html later on\n      // API Routes are Node.js functions\n\n      if (page.match(API_ROUTE)) {\n        hasApiRoutes = true\n        continue\n      }\n\n      if (page === '/_document' || page === '/_app' || page === '/_error') {\n        continue\n      }\n\n      // iSSG pages that are dynamic should not export templated version by\n      // default. In most cases, this would never work. There is no server that\n      // could run `getStaticProps`. If users make their page work lazily, they\n      // can manually add it to the `exportPathMap`.\n      if (prerenderManifest?.dynamicRoutes[page]) {\n        excludedPrerenderRoutes.add(page)\n        continue\n      }\n\n      defaultPathMap[page] = { page }\n    }\n\n    // Initialize the output directory\n    const outDir = options.outdir\n\n    if (outDir === join(dir, 'public')) {\n      throw new Error(\n        `The 'public' directory is reserved in Next.js and can not be used as the export out directory. https://nextjs.org/docs/messages/can-not-output-to-public`\n      )\n    }\n\n    if (outDir === join(dir, 'static')) {\n      throw new Error(\n        `The 'static' directory is reserved in Next.js and can not be used as the export out directory. https://nextjs.org/docs/messages/can-not-output-to-static`\n      )\n    }\n\n    await recursiveDelete(join(outDir))\n    await promises.mkdir(join(outDir, '_next', buildId), { recursive: true })\n\n    writeFileSync(\n      join(distDir, EXPORT_DETAIL),\n      JSON.stringify({\n        version: 1,\n        outDirectory: outDir,\n        success: false,\n      }),\n      'utf8'\n    )\n\n    // Copy static directory\n    if (!options.buildExport && existsSync(join(dir, 'static'))) {\n      if (!options.silent) {\n        Log.info('Copying \"static\" directory')\n      }\n      await nextExportSpan\n        .traceChild('copy-static-directory')\n        .traceAsyncFn(() =>\n          recursiveCopy(join(dir, 'static'), join(outDir, 'static'))\n        )\n    }\n\n    // Copy .next/static directory\n    if (\n      !options.buildExport &&\n      existsSync(join(distDir, CLIENT_STATIC_FILES_PATH))\n    ) {\n      if (!options.silent) {\n        Log.info('Copying \"static build\" directory')\n      }\n      await nextExportSpan\n        .traceChild('copy-next-static-directory')\n        .traceAsyncFn(() =>\n          recursiveCopy(\n            join(distDir, CLIENT_STATIC_FILES_PATH),\n            join(outDir, '_next', CLIENT_STATIC_FILES_PATH)\n          )\n        )\n    }\n\n    // Get the exportPathMap from the config file\n    if (typeof nextConfig.exportPathMap !== 'function') {\n      if (!options.silent) {\n        Log.info(\n          `No \"exportPathMap\" found in \"${CONFIG_FILE}\". Generating map from \"./pages\"`\n        )\n      }\n      nextConfig.exportPathMap = async (defaultMap: ExportPathMap) => {\n        return defaultMap\n      }\n    }\n\n    const {\n      i18n,\n      images: { loader = 'default' },\n    } = nextConfig\n\n    if (i18n && !options.buildExport) {\n      throw new Error(\n        `i18n support is not compatible with next export. See here for more info on deploying: https://nextjs.org/docs/deployment`\n      )\n    }\n\n    if (!options.buildExport) {\n      const { isNextImageImported } = await nextExportSpan\n        .traceChild('is-next-image-imported')\n        .traceAsyncFn(() =>\n          promises\n            .readFile(join(distDir, EXPORT_MARKER), 'utf8')\n            .then((text) => JSON.parse(text))\n            .catch(() => ({}))\n        )\n\n      if (isNextImageImported && loader === 'default' && !hasNextSupport) {\n        throw new Error(\n          `Image Optimization using Next.js' default loader is not compatible with \\`next export\\`.\n  Possible solutions:\n    - Use \\`next start\\` to run a server, which includes the Image Optimization API.\n    - Use any provider which supports Image Optimization (like Vercel).\n    - Configure a third-party loader in \\`next.config.js\\`.\n    - Use the \\`loader\\` prop for \\`next/image\\`.\n  Read more: https://nextjs.org/docs/messages/export-image-api`\n        )\n      }\n    }\n\n    // Start the rendering process\n    const renderOpts = {\n      dir,\n      buildId,\n      nextExport: true,\n      assetPrefix: nextConfig.assetPrefix.replace(/\\/$/, ''),\n      distDir,\n      dev: false,\n      hotReloader: null,\n      basePath: nextConfig.basePath,\n      canonicalBase: nextConfig.amp?.canonicalBase || '',\n      ampValidatorPath: nextConfig.experimental.amp?.validator || undefined,\n      ampSkipValidation: nextConfig.experimental.amp?.skipValidation || false,\n      ampOptimizerConfig: nextConfig.experimental.amp?.optimizer || undefined,\n      locales: i18n?.locales,\n      locale: i18n?.defaultLocale,\n      defaultLocale: i18n?.defaultLocale,\n      domainLocales: i18n?.domains,\n      trailingSlash: nextConfig.trailingSlash,\n      disableOptimizedLoading: nextConfig.experimental.disableOptimizedLoading,\n      // TODO: We should support dynamic HTML too\n      requireStaticHTML: true,\n      concurrentFeatures: nextConfig.experimental.concurrentFeatures,\n    }\n\n    const { serverRuntimeConfig, publicRuntimeConfig } = nextConfig\n\n    if (Object.keys(publicRuntimeConfig).length > 0) {\n      ;(renderOpts as any).runtimeConfig = publicRuntimeConfig\n    }\n\n    // We need this for server rendering the Link component.\n    ;(global as any).__NEXT_DATA__ = {\n      nextExport: true,\n    }\n\n    if (!options.silent && !options.buildExport) {\n      Log.info(`Launching ${threads} workers`)\n    }\n    const exportPathMap = await nextExportSpan\n      .traceChild('run-export-path-map')\n      .traceAsyncFn(() =>\n        nextConfig.exportPathMap(defaultPathMap, {\n          dev: false,\n          dir,\n          outDir,\n          distDir,\n          buildId,\n        })\n      )\n\n    if (\n      !options.buildExport &&\n      !exportPathMap['/404'] &&\n      !exportPathMap['/404.html']\n    ) {\n      exportPathMap['/404'] = exportPathMap['/404.html'] = {\n        page: '/_error',\n      }\n    }\n\n    // make sure to prevent duplicates\n    const exportPaths = [\n      ...new Set(\n        Object.keys(exportPathMap).map((path) =>\n          denormalizePagePath(normalizePagePath(path))\n        )\n      ),\n    ]\n\n    const filteredPaths = exportPaths.filter(\n      // Remove API routes\n      (route) => !exportPathMap[route].page.match(API_ROUTE)\n    )\n\n    if (filteredPaths.length !== exportPaths.length) {\n      hasApiRoutes = true\n    }\n\n    if (filteredPaths.length === 0) {\n      return\n    }\n\n    if (prerenderManifest && !options.buildExport) {\n      const fallbackEnabledPages = new Set()\n\n      for (const key of Object.keys(prerenderManifest.dynamicRoutes)) {\n        // only error if page is included in path map\n        if (!exportPathMap[key] && !excludedPrerenderRoutes.has(key)) {\n          continue\n        }\n\n        if (prerenderManifest.dynamicRoutes[key].fallback !== false) {\n          fallbackEnabledPages.add(key)\n        }\n      }\n\n      if (fallbackEnabledPages.size) {\n        throw new Error(\n          `Found pages with \\`fallback\\` enabled:\\n${[\n            ...fallbackEnabledPages,\n          ].join('\\n')}\\n${SSG_FALLBACK_EXPORT_ERROR}\\n`\n        )\n      }\n    }\n\n    // Warn if the user defines a path for an API page\n    if (hasApiRoutes) {\n      if (!options.silent) {\n        Log.warn(\n          chalk.yellow(\n            `Statically exporting a Next.js application via \\`next export\\` disables API routes.`\n          ) +\n            `\\n` +\n            chalk.yellow(\n              `This command is meant for static-only hosts, and is` +\n                ' ' +\n                chalk.bold(`not necessary to make your application static.`)\n            ) +\n            `\\n` +\n            chalk.yellow(\n              `Pages in your application without server-side data dependencies will be automatically statically exported by \\`next build\\`, including pages powered by \\`getStaticProps\\`.`\n            ) +\n            `\\n` +\n            chalk.yellow(\n              `Learn more: https://nextjs.org/docs/messages/api-routes-static-export`\n            )\n        )\n      }\n    }\n\n    const progress =\n      !options.silent &&\n      createProgress(\n        filteredPaths.length,\n        `${Log.prefixes.info} ${options.statusMessage || 'Exporting'}`\n      )\n    const pagesDataDir = options.buildExport\n      ? outDir\n      : join(outDir, '_next/data', buildId)\n\n    const ampValidations: AmpPageStatus = {}\n    let hadValidationError = false\n\n    const publicDir = join(dir, CLIENT_PUBLIC_FILES_PATH)\n    // Copy public directory\n    if (!options.buildExport && existsSync(publicDir)) {\n      if (!options.silent) {\n        Log.info('Copying \"public\" directory')\n      }\n      await nextExportSpan\n        .traceChild('copy-public-directory')\n        .traceAsyncFn(() =>\n          recursiveCopy(publicDir, outDir, {\n            filter(path) {\n              // Exclude paths used by pages\n              return !exportPathMap[path]\n            },\n          })\n        )\n    }\n\n    const timeout = configuration?.experimental.staticPageGenerationTimeout || 0\n    let infoPrinted = false\n    let exportPage: typeof import('./worker').default\n    let endWorker: () => Promise<void>\n    if (options.exportPageWorker) {\n      exportPage = options.exportPageWorker\n      endWorker = options.endWorker || (() => Promise.resolve())\n    } else {\n      const worker = new Worker(require.resolve('./worker'), {\n        timeout: timeout * 1000,\n        onRestart: (_method, [{ path }], attempts) => {\n          if (attempts >= 3) {\n            throw new Error(\n              `Static page generation for ${path} is still timing out after 3 attempts. See more info here https://nextjs.org/docs/messages/static-page-generation-timeout`\n            )\n          }\n          Log.warn(\n            `Restarted static page genertion for ${path} because it took more than ${timeout} seconds`\n          )\n          if (!infoPrinted) {\n            Log.warn(\n              'See more info here https://nextjs.org/docs/messages/static-page-generation-timeout'\n            )\n            infoPrinted = true\n          }\n        },\n        maxRetries: 0,\n        numWorkers: threads,\n        enableWorkerThreads: nextConfig.experimental.workerThreads,\n        exposedMethods: ['default'],\n      }) as Worker & typeof import('./worker')\n      exportPage = worker.default.bind(worker)\n      endWorker = async () => {\n        await worker.end()\n      }\n    }\n\n    let renderError = false\n    const errorPaths: string[] = []\n\n    await Promise.all(\n      filteredPaths.map(async (path) => {\n        const pageExportSpan = nextExportSpan.traceChild('export-page')\n        pageExportSpan.setAttribute('path', path)\n\n        return pageExportSpan.traceAsyncFn(async () => {\n          const pathMap = exportPathMap[path]\n          const result = await exportPage({\n            path,\n            pathMap,\n            distDir,\n            outDir,\n            pagesDataDir,\n            renderOpts,\n            serverRuntimeConfig,\n            subFolders,\n            buildExport: options.buildExport,\n            serverless: isTargetLikeServerless(nextConfig.target),\n            optimizeFonts: nextConfig.optimizeFonts,\n            optimizeImages: nextConfig.experimental.optimizeImages,\n            optimizeCss: nextConfig.experimental.optimizeCss,\n            disableOptimizedLoading:\n              nextConfig.experimental.disableOptimizedLoading,\n            parentSpanId: pageExportSpan.id,\n            httpAgentOptions: nextConfig.httpAgentOptions,\n          })\n\n          for (const validation of result.ampValidations || []) {\n            const { page, result: ampValidationResult } = validation\n            ampValidations[page] = ampValidationResult\n            hadValidationError =\n              hadValidationError ||\n              (Array.isArray(ampValidationResult?.errors) &&\n                ampValidationResult.errors.length > 0)\n          }\n          renderError = renderError || !!result.error\n          if (!!result.error) errorPaths.push(path)\n\n          if (options.buildExport && configuration) {\n            if (typeof result.fromBuildExportRevalidate !== 'undefined') {\n              configuration.initialPageRevalidationMap[path] =\n                result.fromBuildExportRevalidate\n            }\n\n            if (result.ssgNotFound === true) {\n              configuration.ssgNotFoundPaths.push(path)\n            }\n\n            const durations = (configuration.pageDurationMap[pathMap.page] =\n              configuration.pageDurationMap[pathMap.page] || {})\n            durations[path] = result.duration\n          }\n\n          if (progress) progress()\n        })\n      })\n    )\n\n    const endWorkerPromise = endWorker()\n\n    // copy prerendered routes to outDir\n    if (!options.buildExport && prerenderManifest) {\n      await Promise.all(\n        Object.keys(prerenderManifest.routes).map(async (route) => {\n          const { srcRoute } = prerenderManifest!.routes[route]\n          const pageName = srcRoute || route\n          const pagePath = getPagePath(pageName, distDir, isLikeServerless)\n          const distPagesDir = join(\n            pagePath,\n            // strip leading / and then recurse number of nested dirs\n            // to place from base folder\n            pageName\n              .substr(1)\n              .split('/')\n              .map(() => '..')\n              .join('/')\n          )\n          route = normalizePagePath(route)\n\n          const orig = join(distPagesDir, route)\n          const htmlDest = join(\n            outDir,\n            `${route}${\n              subFolders && route !== '/index' ? `${sep}index` : ''\n            }.html`\n          )\n          const ampHtmlDest = join(\n            outDir,\n            `${route}.amp${subFolders ? `${sep}index` : ''}.html`\n          )\n          const jsonDest = join(pagesDataDir, `${route}.json`)\n\n          await promises.mkdir(dirname(htmlDest), { recursive: true })\n          await promises.mkdir(dirname(jsonDest), { recursive: true })\n          await promises.copyFile(`${orig}.html`, htmlDest)\n          await promises.copyFile(`${orig}.json`, jsonDest)\n\n          if (await exists(`${orig}.amp.html`)) {\n            await promises.mkdir(dirname(ampHtmlDest), { recursive: true })\n            await promises.copyFile(`${orig}.amp.html`, ampHtmlDest)\n          }\n        })\n      )\n    }\n\n    if (Object.keys(ampValidations).length) {\n      console.log(formatAmpMessages(ampValidations))\n    }\n    if (hadValidationError) {\n      throw new Error(\n        `AMP Validation caused the export to fail. https://nextjs.org/docs/messages/amp-export-validation`\n      )\n    }\n\n    if (renderError) {\n      throw new Error(\n        `Export encountered errors on following paths:\\n\\t${errorPaths\n          .sort()\n          .join('\\n\\t')}`\n      )\n    }\n\n    writeFileSync(\n      join(distDir, EXPORT_DETAIL),\n      JSON.stringify({\n        version: 1,\n        outDirectory: outDir,\n        success: true,\n      }),\n      'utf8'\n    )\n\n    if (telemetry) {\n      await telemetry.flush()\n    }\n\n    await endWorkerPromise\n  })\n}\n"],"names":[],"mappings":"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"}