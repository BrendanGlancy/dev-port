{"version":3,"sources":["../../../../build/babel/plugins/commonjs.ts"],"sourcesContent":["import { NodePath, PluginObj, types } from 'next/dist/compiled/babel/core'\nimport commonjsPlugin from 'next/dist/compiled/babel/plugin-transform-modules-commonjs'\n\n// Handle module.exports in user code\nexport default function CommonJSModulePlugin(...args: any): PluginObj {\n  const commonjs = commonjsPlugin(...args)\n  return {\n    visitor: {\n      Program: {\n        exit(path: NodePath<types.Program>, state) {\n          let foundModuleExports = false\n          path.traverse({\n            MemberExpression(expressionPath: any) {\n              if (expressionPath.node.object.name !== 'module') return\n              if (expressionPath.node.property.name !== 'exports') return\n              foundModuleExports = true\n            },\n          })\n\n          if (!foundModuleExports) {\n            return\n          }\n\n          commonjs.visitor.Program.exit.call(this, path, state)\n        },\n      },\n    },\n  }\n}\n"],"names":[],"mappings":";;;;kBAIwB,oBAAoB;AAHjB,GAA4D,CAA5D,+BAA4D;;;;;;SAG/D,oBAAoB,IAAI,IAAI,EAAkB,CAAC;IACrE,KAAK,CAAC,QAAQ,OAJW,+BAA4D,aAIlD,IAAI;;QAErC,OAAO;YACL,OAAO;gBACL,IAAI,EAAC,IAA6B,EAAE,KAAK,EAAE,CAAC;oBAC1C,GAAG,CAAC,kBAAkB,GAAG,KAAK;oBAC9B,IAAI,CAAC,QAAQ;wBACX,gBAAgB,EAAC,cAAmB,EAAE,CAAC;4BACrC,EAAE,EAAE,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,MAAK,MAAQ;4BAChD,EAAE,EAAE,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,MAAK,OAAS;4BACnD,kBAAkB,GAAG,IAAI;wBAC3B,CAAC;;oBAGH,EAAE,GAAG,kBAAkB,EAAE,CAAC;;oBAE1B,CAAC;oBAED,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,OAAO,IAAI,EAAE,KAAK;gBACtD,CAAC;;;;AAIT,CAAC"}