{"version":3,"sources":["../../../../build/webpack/plugins/chunk-names-plugin.ts"],"sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\n// This plugin mirrors webpack 3 `filename` and `chunkfilename` behavior\n// This fixes https://github.com/webpack/webpack/issues/6598\n// This plugin is based on https://github.com/researchgate/webpack/commit/2f28947fa0c63ccbb18f39c0098bd791a2c37090\nexport default class ChunkNamesPlugin {\n  apply(compiler: webpack.Compiler) {\n    compiler.hooks.compilation.tap(\n      'NextJsChunkNamesPlugin',\n      (compilation: any) => {\n        compilation.chunkTemplate.hooks.renderManifest.intercept({\n          register(tapInfo: any) {\n            if (tapInfo.name === 'JavascriptModulesPlugin') {\n              const originalMethod = tapInfo.fn\n              tapInfo.fn = (result: any, options: any) => {\n                let filenameTemplate\n                const chunk = options.chunk\n                const outputOptions = options.outputOptions\n                if (chunk.filenameTemplate) {\n                  filenameTemplate = chunk.filenameTemplate\n                } else if (chunk.hasEntryModule()) {\n                  filenameTemplate = outputOptions.filename\n                } else {\n                  filenameTemplate = outputOptions.chunkFilename\n                }\n\n                options.chunk.filenameTemplate = filenameTemplate\n                return originalMethod(result, options)\n              }\n            }\n            return tapInfo\n          },\n        })\n      }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;;MAIqB,gBAAgB;IACnC,KAAK,CAAC,QAA0B,EAAE,CAAC;QACjC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,EAC5B,sBAAwB,IACvB,WAAgB,GAAK,CAAC;YACrB,WAAW,CAAC,aAAa,CAAC,KAAK,CAAC,cAAc,CAAC,SAAS;gBACtD,QAAQ,EAAC,OAAY,EAAE,CAAC;oBACtB,EAAE,EAAE,OAAO,CAAC,IAAI,MAAK,uBAAyB,GAAE,CAAC;wBAC/C,KAAK,CAAC,cAAc,GAAG,OAAO,CAAC,EAAE;wBACjC,OAAO,CAAC,EAAE,IAAI,MAAW,EAAE,OAAY,GAAK,CAAC;4BAC3C,GAAG,CAAC,gBAAgB;4BACpB,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK;4BAC3B,KAAK,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa;4BAC3C,EAAE,EAAE,KAAK,CAAC,gBAAgB,EAAE,CAAC;gCAC3B,gBAAgB,GAAG,KAAK,CAAC,gBAAgB;4BAC3C,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,cAAc,IAAI,CAAC;gCAClC,gBAAgB,GAAG,aAAa,CAAC,QAAQ;4BAC3C,CAAC,MAAM,CAAC;gCACN,gBAAgB,GAAG,aAAa,CAAC,aAAa;4BAChD,CAAC;4BAED,OAAO,CAAC,KAAK,CAAC,gBAAgB,GAAG,gBAAgB;mCAC1C,cAAc,CAAC,MAAM,EAAE,OAAO;wBACvC,CAAC;oBACH,CAAC;2BACM,OAAO;gBAChB,CAAC;;QAEL,CAAC;IAEL,CAAC;;kBA9BkB,gBAAgB"}