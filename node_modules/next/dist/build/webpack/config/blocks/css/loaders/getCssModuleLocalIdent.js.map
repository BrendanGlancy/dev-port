{"version":3,"sources":["../../../../../../../build/webpack/config/blocks/css/loaders/getCssModuleLocalIdent.ts"],"sourcesContent":["import loaderUtils from 'next/dist/compiled/loader-utils'\nimport path from 'path'\nimport { webpack } from 'next/dist/compiled/webpack/webpack'\n\nconst regexLikeIndexModule = /(?<!pages[\\\\/])index\\.module\\.(scss|sass|css)$/\n\nexport function getCssModuleLocalIdent(\n  context: webpack.loader.LoaderContext,\n  _: any,\n  exportName: string,\n  options: object\n) {\n  const relativePath = path\n    .relative(context.rootContext, context.resourcePath)\n    .replace(/\\\\+/g, '/')\n\n  // Generate a more meaningful name (parent folder) when the user names the\n  // file `index.module.css`.\n  const fileNameOrFolder = regexLikeIndexModule.test(relativePath)\n    ? '[folder]'\n    : '[name]'\n\n  // Generate a hash to make the class name unique.\n  const hash = loaderUtils.getHashDigest(\n    Buffer.from(`filePath:${relativePath}#className:${exportName}`),\n    'md5',\n    'base64',\n    5\n  )\n\n  // Have webpack interpolate the `[folder]` or `[name]` to its real value.\n  return (\n    loaderUtils\n      .interpolateName(\n        context,\n        fileNameOrFolder + '_' + exportName + '__' + hash,\n        options\n      )\n      .replace(\n        // Webpack name interpolation returns `about.module_root__2oFM9` for\n        // `.root {}` inside a file named `about.module.css`. Let's simplify\n        // this.\n        /\\.module_/,\n        '_'\n      )\n      // Replace invalid symbols with underscores instead of escaping\n      // https://mathiasbynens.be/notes/css-escapes#identifiers-strings\n      .replace(/[^a-zA-Z0-9-_]/g, '_')\n      // \"they cannot start with a digit, two hyphens, or a hyphen followed by a digit [sic]\"\n      // https://www.w3.org/TR/CSS21/syndata.html#characters\n      .replace(/^(\\d|--|-\\d)/, '__$1')\n  )\n}\n"],"names":[],"mappings":";;;;QAMgB,sBAAsB,GAAtB,sBAAsB;AANd,GAAiC,CAAjC,YAAiC;AACxC,GAAM,CAAN,KAAM;;;;;;AAGvB,KAAK,CAAC,oBAAoB;SAEV,sBAAsB,CACpC,OAAqC,EACrC,CAAM,EACN,UAAkB,EAClB,OAAe,EACf,CAAC;IACD,KAAK,CAAC,YAAY,GAXH,KAAM,SAYlB,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,YAAY,EAClD,OAAO,UAAS,CAAG;IAEtB,EAA0E,AAA1E,wEAA0E;IAC1E,EAA2B,AAA3B,yBAA2B;IAC3B,KAAK,CAAC,gBAAgB,GAAG,oBAAoB,CAAC,IAAI,CAAC,YAAY,KAC3D,QAAU,KACV,MAAQ;IAEZ,EAAiD,AAAjD,+CAAiD;IACjD,KAAK,CAAC,IAAI,GAvBY,YAAiC,SAuB9B,aAAa,CACpC,MAAM,CAAC,IAAI,EAAE,SAAS,EAAE,YAAY,CAAC,WAAW,EAAE,UAAU,MAC5D,GAAK,IACL,MAAQ,GACR,CAAC;IAGH,EAAyE,AAAzE,uEAAyE;WA9BnD,YAAiC,SAiClD,eAAe,CACd,OAAO,EACP,gBAAgB,IAAG,CAAG,IAAG,UAAU,IAAG,EAAI,IAAG,IAAI,EACjD,OAAO,EAER,OAAO,CACN,EAAoE,AAApE,kEAAoE;IACpE,EAAoE,AAApE,kEAAoE;IACpE,EAAQ,AAAR,MAAQ;kBAER,CAAG,EAEL,EAA+D,AAA/D,6DAA+D;IAC/D,EAAiE,AAAjE,+DAAiE;KAChE,OAAO,qBAAoB,CAAG,EAC/B,EAAuF,AAAvF,qFAAuF;IACvF,EAAsD,AAAtD,oDAAsD;KACrD,OAAO,kBAAiB,IAAM;AAErC,CAAC"}